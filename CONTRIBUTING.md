# @equinor/rdf-graph Contributing Guide

## Repository Setup

This repo is a monorepo using [pnpm](https://pnpm.io) workspaces and the [NX](https://nx.dev) build system. [Node.js LTS](https://nodejs.org) version and pnpm is required.

> NOTE: All commands should be ran from repository root if not stated otherwise

```sh
# Make sure you are on version 8 of the pnpm CLI
node -v && pnpm -v
v18.12.0
8.1.0

# Install dependencies (from repo root)
 pnpm i
```

If NX is not installed globally on your system, a tip is to add an alias for `nx` in your terminal to avoid needing to prepend "pnpm" to all commands (ex: `alias nx="pnpm nx"`).

## Development UI

```sh
# Open development app
pnpm nx serve playground
# or just (if nx is installed globally on your system or you use an alias: nx="pnpm nx")
nx serve playground

# Watch all shared packages and build on change
chmod +x ./scripts/watch_deps.sh
pnpm watch:playground:deps
```

## NX and Lerna Introduction

TODO

## Testing

We write unit tests on critical functionality. Test files should suffixed by `*.test.ts` or `*.test.tsx`.

```sh
# Run all tests
pnpm test
# or
nx run-many -t test

# Run a tests for core package
nx test @equinor/rdf-graph

# Run a tests for gojs package
nx test @equinor/rdf-graph-go
```

## Lefthook - Git hooks manager

Hooks are defined in `lefthook.yml`. You may need to run `git config --unset core.hooksPath` locally (once) to clear the previously used husky path.

## Code quality

The project is set up with TypeScript, Eslint, Prettier, and the following is run when validating each pull request:

```sh
# TODO
```

## PR's & Package Release

This repo uses [Lerna](https://lerna.js.org) for automating CHANGELOG generation, the creation of GitHub releases, and version bumping. Lerna assumes you are using [Conventional Commit messages](https://www.conventionalcommits.org).

The most important commit message prefixes you should have in mind are:

- **fix:** which represents bug fixes, and correlates to a **SemVer PATCH**.
- **feat:** which represents a new feature, and correlates to a **SemVer MINOR**.
- **feat!:, or fix!:, refactor!:, etc.,** which represent a breaking change (indicated by the !) and will result in a **SemVer MAJOR**.

For any prefix besides **feat**, **SemVer PATCH** version is used for bumps unless there is a breaking change.

Note that the autogenerated release PR will update automatically when a new commit is pushed to main.

### Commit Message Prefixes

- **feat:** A new feature
- **fix:** A bug fix
- **docs:** Documentation only changes
- **style:** Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)
- **refactor:** A code change that neither fixes a bug nor adds a feature
- **perf:** A code change that improves performance
- **test:** Adding missing tests or correcting existing tests
- **build:** Changes that affect the build system or external dependencies (example scopes: vite, npm)
- **ci:** Changes to our CI configuration files and scripts (example scopes: Travis, Circle, BrowserStack, SauceLabs)
- **chore:** Other changes that don't modify src or test files
- **revert:** Reverts a previous commit

### Commit Message Examples

- feat(grpc): add new endpoint
- refactor: combine class A and class B
- ci: update pull request linter
- style: change format of strings
- feat!: rename core react component prop
